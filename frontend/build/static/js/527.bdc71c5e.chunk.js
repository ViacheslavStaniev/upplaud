"use strict";(self.webpackChunkpdsq_frontend=self.webpackChunkpdsq_frontend||[]).push([[527],{63527:(e,t,n)=>{n.r(t),n.d(t,{default:()=>H});var o=n(72791),i=n(59434),l=n(908),s=n(48080),a=n(18406),r=n(78302),c=n(71046),d=n(51678),u=n(61431),v=n(2556),h=n(91082),m=n(82954),g=n(30368),x=n(40959),p=n(69228),f=n(20952),j=n(87462);const y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"};var k=n(8711),S=function(e,t){return o.createElement(k.Z,(0,j.Z)({},e,{ref:t,icon:y}))};const w=o.forwardRef(S);const b={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"};var Z=function(e,t){return o.createElement(k.Z,(0,j.Z)({},e,{ref:t,icon:b}))};const C=o.forwardRef(Z);var N=n(31752),A=n(35370);const E={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"};var P=function(e,t){return o.createElement(k.Z,(0,j.Z)({},e,{ref:t,icon:E}))};const _=o.forwardRef(P);var T=n(82622),O=n(83769),I=n(76171),D=n(34820),R=n(80184);const{PUBLISHED:q}=l.POLL_STATUS,{FACEBOOK:L,LINKEDIN:U}=l.SOCIAL_TYPE,{Text:V,Title:F,Paragraph:B}=r.default;function H(){var e;const t=(0,i.I0)(),[n,l]=(0,o.useState)([]),[r,p]=(0,o.useState)(null),[f,j]=(0,o.useState)(null),y=n.length,{guests:k=[],isLoading:S=!1}=(0,i.v9)((e=>e.guests));(0,o.useEffect)((()=>{t((0,s._i)())}),[t]);const b=k.find((e=>{let{_id:t}=e;return t===f})),Z=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{let{isActive:n}=t;return e||n}),!1)},E=[{key:"name",title:"NAME",dataIndex:"name",render:(e,t)=>(0,R.jsxs)(c.Z,{className:t.guest?"":"disabled",children:[(0,R.jsx)(d.Z,{color:(0,a.mr)(),count:e.charAt()}),(0,R.jsx)(V,{strong:!0,children:e})]}),sorter:(e,t)=>e.name.localeCompare(t.name)},{key:"recordingDate",title:"RECORDING DATE",dataIndex:"recordingDate",sorter:(e,t)=>e.recordingDate-t.recordingDate,render:e=>(0,R.jsx)(V,{className:"color-5D0578",children:(0,a.fh)(e)})},{key:"votes",title:"VOTES",dataIndex:"votes",sorter:(e,t)=>{var n,o;return(null===(n=e.votes)||void 0===n?void 0:n.length)-(null===(o=t.votes)||void 0===o?void 0:o.length)},render:e=>"Total Votes (".concat(null===e||void 0===e?void 0:e.length,")")},{align:"center",key:"sconnecctors",title:"Social Connections",render:e=>{let{sconnecctors:t}=e;const n=[{key:L,slug:"facebook",isConnected:t[L]||!1},{key:U,slug:"linkedin",isConnected:t[U]||!1}];return(0,R.jsx)("div",{className:"flex-item gap-1 flex-center",children:n.map((e=>{let{key:t,slug:n,isConnected:o}=e;return(0,R.jsx)(u.Z,{title:o?"Connected":"Not Connected",children:(0,R.jsx)(d.Z,{dot:!0,color:o?"blue":"red",children:(0,R.jsx)(v.ZP,{type:"ghost",shape:"circle",className:"color-".concat(n),icon:(0,R.jsx)(I.Z,{name:n})})},t)},t)}))})}},{key:"action",title:"Action",render:e=>{let{id:n,isActive:o,votes:i,isPublished:l}=e;return(0,R.jsxs)(c.Z,{children:[(0,R.jsx)(u.Z,{title:"Congrats & Details",children:(0,R.jsx)(v.ZP,{icon:(0,R.jsx)(w,{}),disabled:!l,onClick:()=>j(n)})}),(0,R.jsx)(u.Z,{title:"Re-Send Invitation Email",children:(0,R.jsx)(v.ZP,{disabled:!0,icon:(0,R.jsx)(C,{})})}),(0,R.jsx)(u.Z,{title:"Edit Automation Details",children:(0,R.jsx)(v.ZP,{href:"/automations/".concat(n),icon:(0,R.jsx)(N.Z,{})})}),(0,R.jsx)(u.Z,{title:"".concat(o?"Pause":"Active"," Automation"),children:(0,R.jsx)(v.ZP,{danger:o,icon:(0,R.jsx)(A.Z,{})})}),(0,R.jsx)(u.Z,{title:"Download Voting Data",children:(0,R.jsx)(v.ZP,{disabled:!(null!==i&&void 0!==i&&i.length),icon:(0,R.jsx)(_,{}),onClick:()=>(0,a.MD)(i)})}),(0,R.jsx)(h.Z,{placement:"topLeft",title:"Are you sure?",description:"This action can't be undone.",onConfirm:()=>t((0,s.tn)(n)),children:(0,R.jsx)(u.Z,{title:"Delete",children:(0,R.jsx)(v.ZP,{icon:(0,R.jsx)(T.Z,{})})})})]})}}],P=e=>k.filter((t=>{let{guestType:n}=t;return n===e})).map((e=>{var t;let{_id:n,guest:o,status:i,socials:l,recordingDate:s,votes:a}=e;return{votes:a,guest:o,status:i,id:n,key:n,todo:"",isPublished:i===q,statusObj:{guest:null,host:null},recordingDate:new Date(s).getTime(),name:o?"".concat(o.firstName," ").concat(o.lastName):"--",isActive:i===q&&Z(l),sconnecctors:null===o||void 0===o||null===(t=o.socialAccounts)||void 0===t?void 0:t.reduce(((e,t)=>{let{type:n,isConnected:o}=t;return{...e,[n]:o}}),{[L]:!1,[U]:!1})}})),B=()=>0===y?null:(0,R.jsxs)("div",{className:"flex-item br-5px gap-2",children:[(0,R.jsxs)(V,{strong:!0,className:"font-16px",type:"danger",children:[y," Automation",y>1?"s":""," Selected"]}),(0,R.jsx)(h.Z,{placement:"topLeft",title:"Are you sure?",okButtonProps:{danger:!0},description:"All the selected entries will be deleted.",onConfirm:()=>t((0,s.H7)(n.map((e=>e.id)))),children:(0,R.jsx)(v.ZP,{danger:!0,type:"primary",icon:(0,R.jsx)(T.Z,{})})})]}),H=a.Qg.map((e=>{let{key:t,label:n}=e;return{key:t,label:n,children:(0,R.jsx)(m.Z,{columns:E,loading:S,dataSource:P(t),pagination:{defaultPageSize:5},rowSelection:{type:"checkbox",onChange:(e,t)=>l(t)}})}}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(O.Z,{title:"Automations"}),(0,R.jsxs)("div",{className:"account-admin",children:[(0,R.jsx)(F,{className:"m-0 mb-1",children:"Automations"}),(0,R.jsxs)("div",{className:"flex-item",children:[(0,R.jsx)(F,{level:5,className:"m-0 mb-4 fw-400 color-45485C flex-auto",children:"Manage the automations of your guests & track the numbers of votes from your Guest (G), your connections (H), or Neither (N). You can also export voters\u2019 email addresses, topic suggestions, referral names, etc."}),(0,R.jsx)(v.ZP,{type:"info",shape:"round",size:"large",children:"REMIND INVITES"})]}),(0,R.jsx)(g.Z,{items:H,defaultActiveKey:null===(e=a.Qg[0])||void 0===e?void 0:e.key,tabBarExtraContent:{right:(0,R.jsx)(B,{})}})]}),(0,R.jsx)(M,{votes:r,onClose:()=>p(!1)}),(0,R.jsx)(x.Z,{footer:null,open:!!b,width:"min(90%, 820px)",title:"Automation Congrats & Details",onCancel:()=>j(null),children:b&&(0,R.jsx)(D.Z,{guest:b})})]})}function M(e){let{votes:t=[],onClose:n}=e;const o=[{title:"#",dataIndex:"index"},{title:"Selected Topic",dataIndex:"topic"},m.Z.EXPAND_COLUMN,{title:"Suggestion",dataIndex:"suggestion"},{title:"Voter",dataIndex:"voter"},{title:"Timestamp",dataIndex:"createdAt"}],i=(t||[]).map(((e,t)=>{const{_id:n,createdAt:o,selectedTopic:i,suggestions:l,isSuggestion:s}=e;return{...e,key:n,index:t+1,createdAt:(0,a.fh)(o),topic:(0,R.jsx)(p.Z,{title:"Suggestions",open:!!s&&null,content:(0,R.jsxs)("div",{className:"topic-suggestion",children:[(0,R.jsxs)(B,{className:"m-0",children:["Topic: ",(0,R.jsx)(V,{strong:!0,children:null===l||void 0===l?void 0:l.topic})]}),(0,R.jsxs)(B,{className:"m-0",children:["Speaker: ",(0,R.jsx)(V,{strong:!0,children:(null===l||void 0===l?void 0:l.speaker)||"--"})]})]}),children:(0,R.jsx)(f.Z,{bordered:!s,children:(null===i||void 0===i?void 0:i.topic)||"OTHER"})}),suggestion:"hello"}}));return(0,R.jsx)(x.Z,{width:800,footer:null,open:!!t,onCancel:n,title:"Voting Details (".concat(null===t||void 0===t?void 0:t.length,")"),children:(0,R.jsx)(m.Z,{columns:o,dataSource:i,expandable:{expandedRowRender:e=>(0,R.jsx)("p",{style:{margin:0},children:e.description}),rowExpandable:e=>{var t;return(null===e||void 0===e||null===(t=e.questionnaireAnswers)||void 0===t?void 0:t.length)>0}}})})}},34820:(e,t,n)=>{n.d(t,{Z:()=>f});var o=n(78302),i=n(2556),l=n(57689),s=n(11087),a=n(38072),r=n(908),c=n(99372),d=n(67575),u=n(80184);function v(e){let{text:t="",className:n="",onCopy:i=(()=>{})}=e;return(0,u.jsx)("div",{className:"p-1 br-5px bg-sky-6 border-sky-1 ".concat(n),children:(0,u.jsx)(o.default.Paragraph,{ellipsis:!0,copyable:{onCopy:i},className:"m-0 flex-item space-between",children:t})})}var h=n(72791),m=n(40959),g=n(33805);function x(e){let{text:t="",className:n="",socialShareFileSrc:i=""}=e;const[l,s]=(0,h.useState)(!1);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.default.Link,{className:n,onClick:()=>s(!0),children:t||"Preview Video"}),(0,u.jsx)(m.Z,{centered:!0,width:"50%",footer:!1,open:l,title:"Preview Video Invitation Post",onCancel:()=>s(!1),children:(0,u.jsx)("video",{controls:!0,src:(0,g.fE)(i),style:{width:"100%",height:"auto"}})})]})}const{Title:p}=o.default;function f(e){let{guest:t,showActionBtns:n=!1,onGoBack:o=(()=>{})}=e;const h=(0,l.s0)(),m=(null===t||void 0===t?void 0:t.startHostAutomation)||!1,g=((null===t||void 0===t?void 0:t.socials)||[]).reduce(((e,t)=>{if(!t||!t.isConnected)return e;const{type:n,subType:o}=t;return[...e,"".concat(r.W[n]," ").concat(o)]}),[]);return(0,u.jsxs)("div",{className:"mt-2 bg-F7F3F9 p-3 br-5px",children:[(0,u.jsx)(p,{level:3,children:"\ud83d\udc4f Congrats, your new Upplaud is ready to pull in new interest!"}),(0,u.jsxs)(p,{level:5,children:["Voters will be directed to:"," ",(0,u.jsx)(s.rU,{target:"_blank",to:"/vote/".concat(null===t||void 0===t?void 0:t._id),children:"Voting Page"})]}),(0,u.jsx)(p,{level:5,children:"You've connected:"}),(0,u.jsx)("ul",{children:g.map(((e,t)=>(0,u.jsx)("li",{className:"capitalize",children:e},t)))}),(0,u.jsxs)(p,{level:5,children:["Preview your voter invitation video:"," ",(0,u.jsx)(x,{className:"ml-1",socialShareFileSrc:null===t||void 0===t?void 0:t.socialShareFileSrc})," "]}),(0,u.jsxs)(p,{level:5,className:"mb-1",children:["Your guest will be invited to connect here:"," ",(0,u.jsx)(s.rU,{target:"_blank",to:"/guest-acceptance/".concat(null===t||void 0===t?void 0:t._id),children:"Guest Invitation Page"})]}),(0,u.jsxs)(p,{level:5,className:"mt-0",children:["Their private invite password is:"," ",(0,u.jsx)(v,{text:null===t||void 0===t?void 0:t.password,className:"d-inline-block w-125px ml-1"})]}),(0,u.jsxs)(p,{level:4,children:["We'll start posting"," ",m?"when your guest connects their social media.":"later today!"]}),n&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.ZP,{type:"default",size:"large",onClick:o,icon:(0,u.jsx)(c.Z,{}),children:"Go back to make any changes."}),(0,u.jsx)(i.ZP,{type:"primary",size:"large",className:"d-block mt-2",icon:(0,u.jsx)(d.Z,{}),onClick:()=>h(a.PATH_DASHBOARD.dashboard.automations),children:"CONFIRM YOUR NEW UPPLAUD & SEE YOUR OTHER AUTOMATIONS"})]})]})}},18406:(e,t,n)=>{n.d(t,{K6:()=>p,MD:()=>f,Qg:()=>m,Ug:()=>g,dh:()=>x,fh:()=>h,mr:()=>v});var o=n(25415),i=n(908);const{FACEBOOK:l}=i.SOCIAL_TYPE,{HOST_GUEST:s,SOLO_SESSION:a}=i.GUEST_TYPE,{PROFILE:r,PAGE:c,GROUP:d}=i.SOCIAL_SUB_TYPE,u=["##E91E63","#673AB7","#2196F3","#00BCD4","#FF9800","#8BC34A","#009688","#FF5722","#607D8B","#F44336"],v=()=>u[Math.floor(Math.random()*u.length)],h=e=>new Date(e).toDateString(),m=[{key:s,value:s,label:"JOINT SESSION",text:"Their Info"},{key:a,value:a,label:"SOLO SESSION",text:"Your Info"}],g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return m.find((t=>t.key===e))},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const o=(e=>i.W[e])(e);return t===r?"YOUR ".concat(o," PROFILE"):t===c?"YOUR ".concat(o," PAGE: ").concat(n):t===d?"YOUR ".concat(o," GROUP: ").concat(n):""},p=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(((e,t)=>{if(null===t||void 0===t||!t.isConnected)return e;const{type:n,socialId:o,page:i,group:s}=t,a=function(e,t){return{type:n,subType:e,frequency:arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,subTypeId:t,subTypeName:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",isActive:!1,_id:"".concat(n,"_").concat(e),isConnected:(t||"").toString().length>0}},u=e=>{var t;return(null===e||void 0===e||null===(t=e.accounts.find((t=>{let{id:n}=t;return n===(null===e||void 0===e?void 0:e.socialId)})))||void 0===t?void 0:t.name)||""},v=[...e,a(r,o),a(c,null===i||void 0===i?void 0:i.socialId,u(i))];return n===l?[...v,a(d,null===s||void 0===s?void 0:s.socialId,u(i))]:v}),[])},f=e=>{const t=new o.Workbook,n=t.addWorksheet("Voting Data"),{questionnaireAnswers:i=[]}=e[0]||{},[l,s,a,r]=i;n.columns=[{header:"Selected Topic",key:"topic"},{header:"Voter Name",key:"voter_name"},{header:"Voter Email",key:"voter_email"},{header:"Voter Cell Phone",key:"voter_cellphone"},{header:"User Suggested",key:"isSuggestion"},{header:"Suggested Topic",key:"suggested_topic"},{header:"Suggested Speaker",key:"suggested_speaker"},{header:"Question 1: ".concat(null===l||void 0===l?void 0:l.question),key:"quest1"},{header:"Question 2: ".concat(null===s||void 0===s?void 0:s.question),key:"quest2"},{header:"Referral 1",key:"quest2_referral1"},{header:"Referral 2",key:"quest2_referral2"},{header:"Name",key:"quest2_name"},{header:"Email",key:"quest2_email"},{header:"Question 3: ".concat(null===a||void 0===a?void 0:a.question),key:"quest3"},{header:"Question 4: ".concat(null===r||void 0===r?void 0:r.question),key:"quest4"},{header:"Timestamp",key:"timestamp"}],e.forEach((e=>{var t,o,i,l,s,a;const{selectedTopic:r,voter:c,isSuggestion:d,suggestions:u,createdAt:v,questionnaireAnswers:h}=e,[m,g,x,p]=h;n.addRow({topic:(null===r||void 0===r?void 0:r.topic)||"Other",voter_name:(null===c||void 0===c?void 0:c.name)||"--",voter_email:(null===c||void 0===c?void 0:c.email)||"--",voter_cellphone:(null===c||void 0===c?void 0:c.cell_phone)||"--",isSuggestion:d?"Yes":"No",suggested_topic:(null===u||void 0===u?void 0:u.topic)||"--",suggested_speaker:(null===u||void 0===u?void 0:u.speaker)||"--",quest1:m&&(null===m||void 0===m?void 0:m.answers)||"--",quest2:null!==g&&void 0!==g&&g.answers?"Comment: ".concat((null===g||void 0===g||null===(t=g.answers)||void 0===t?void 0:t.comment)||"--"):"--",quest2_referral1:(null===g||void 0===g||null===(o=g.answers)||void 0===o?void 0:o.referral1)||"--",quest2_referral2:(null===g||void 0===g||null===(i=g.answers)||void 0===i?void 0:i.referral2)||"--",quest2_name:(null===g||void 0===g||null===(l=g.answers)||void 0===l?void 0:l.name)||"--",quest2_email:(null===g||void 0===g||null===(s=g.answers)||void 0===s?void 0:s.email)||"--",quest3:x&&(null===x||void 0===x||null===(a=x.answers)||void 0===a?void 0:a.answer)||"--",quest4:p?null!==p&&void 0!==p&&p.doneSharing?"Yes":"No":"--",timestamp:new Date(v).toLocaleString()})})),t.xlsx.writeBuffer().then((e=>{const t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=window.URL.createObjectURL(t),o=document.createElement("a");o.href=n,o.download="VotingData.xlsx",o.click()}))}},99372:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(87462),i=n(72791);const l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};var s=n(8711),a=function(e,t){return i.createElement(s.Z,(0,o.Z)({},e,{ref:t,icon:l}))};const r=i.forwardRef(a)}}]);
//# sourceMappingURL=527.bdc71c5e.chunk.js.map