"use strict";(self.webpackChunkpdsq_frontend=self.webpackChunkpdsq_frontend||[]).push([[527],{63527:function(e,n,t){t.r(n),t.d(n,{default:function(){return M}});var o=t(1413),i=t(29439),r=t(72791),l=t(908),s=t(59434),a=t(48080),c=t(18406),d=t(78302),u=t(71046),v=t(51678),h=t(61431),f=t(2641),g=t(91082),m=t(82954),p=t(30368),x=t(40959),j=t(69228),y=t(20952),Z=t(87462),k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.9 533.7c16.8-22.2 26.1-49.4 26.1-77.7 0-44.9-25.1-87.4-65.5-111.1a67.67 67.67 0 00-34.3-9.3H572.4l6-122.9c1.4-29.7-9.1-57.9-29.5-79.4A106.62 106.62 0 00471 99.9c-52 0-98 35-111.8 85.1l-85.9 311H144c-17.7 0-32 14.3-32 32v364c0 17.7 14.3 32 32 32h601.3c9.2 0 18.2-1.8 26.5-5.4 47.6-20.3 78.3-66.8 78.3-118.4 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7 0-12.6-1.8-25-5.4-37 16.8-22.2 26.1-49.4 26.1-77.7-.2-12.6-2-25.1-5.6-37.1zM184 852V568h81v284h-81zm636.4-353l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 16.5-7.2 32.2-19.6 43l-21.9 19 13.9 25.4a56.2 56.2 0 016.9 27.3c0 22.4-13.2 42.6-33.6 51.8H329V564.8l99.5-360.5a44.1 44.1 0 0142.2-32.3c7.6 0 15.1 2.2 21.1 6.7 9.9 7.4 15.2 18.6 14.6 30.5l-9.6 198.4h314.4C829 418.5 840 436.9 840 456c0 16.5-7.2 32.1-19.6 43z"}}]},name:"like",theme:"outlined"},w=t(8711),b=function(e,n){return r.createElement(w.Z,(0,Z.Z)({},e,{ref:n,icon:k}))};var S=r.forwardRef(b),N={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},C=function(e,n){return r.createElement(w.Z,(0,Z.Z)({},e,{ref:n,icon:N}))};var A=r.forwardRef(C),E=t(31752),P=t(35370),_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},I=function(e,n){return r.createElement(w.Z,(0,Z.Z)({},e,{ref:n,icon:_}))};var O=r.forwardRef(I),T=t(82622),D=t(83769),q=t(64590),R=t(80184),U=l.K4.PUBLISHED,V=d.Z.Text,B=d.Z.Title,F=d.Z.Paragraph;function M(){var e,n=(0,s.I0)(),t=(0,r.useState)([]),o=(0,i.Z)(t,2),l=o[0],d=o[1],j=(0,r.useState)(null),y=(0,i.Z)(j,2),Z=y[0],k=y[1],w=(0,r.useState)(null),b=(0,i.Z)(w,2),N=b[0],C=b[1],_=l.length,I=(0,s.v9)((function(e){return e.guests})),F=I.guests,M=void 0===F?[]:F,H=I.isLoading,z=void 0!==H&&H;(0,r.useEffect)((function(){n((0,a._i)())}),[n]),console.log("guests",M);var G=M.find((function(e){return e._id===N})),Y=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,n){var t=n.isActive;return e||t}),!1)},Q=[{key:"name",title:"NAME",dataIndex:"name",render:function(e,n){return(0,R.jsxs)(u.Z,{className:n.guest?"":"disabled",children:[(0,R.jsx)(v.Z,{color:(0,c.mr)(),count:e.charAt()}),(0,R.jsx)(V,{strong:!0,children:e})]})},sorter:function(e,n){return e.name.localeCompare(n.name)}},{key:"recordingDate",title:"RECORDING DATE",dataIndex:"recordingDate",sorter:function(e,n){return e.recordingDate-n.recordingDate},render:function(e){return(0,R.jsx)(V,{className:"color-5D0578",children:(0,c.fh)(e)})}},{key:"votes",title:"VOTES",dataIndex:"votes",sorter:function(e,n){var t,o;return(null===(t=e.votes)||void 0===t?void 0:t.length)-(null===(o=n.votes)||void 0===o?void 0:o.length)},render:function(e){return"Total Votes (".concat(null===e||void 0===e?void 0:e.length,")")}},{key:"sconnecctors",title:"Social Connections",render:function(){return(0,R.jsx)(V,{children:"Not Connected"})}},{key:"action",title:"Action",render:function(e){var t=e.id,o=e.isActive,i=e.votes,r=e.isPublished;return(0,R.jsxs)(u.Z,{children:[(0,R.jsx)(h.Z,{title:"Congrats & Details",children:(0,R.jsx)(f.ZP,{icon:(0,R.jsx)(S,{}),disabled:!r,onClick:function(){return C(t)}})}),(0,R.jsx)(h.Z,{title:"Re-Send Invitation Email",children:(0,R.jsx)(f.ZP,{disabled:!0,icon:(0,R.jsx)(A,{})})}),(0,R.jsx)(h.Z,{title:"Edit Automation Details",children:(0,R.jsx)(f.ZP,{href:"/automations/".concat(t),icon:(0,R.jsx)(E.Z,{})})}),(0,R.jsx)(h.Z,{title:"".concat(o?"Pause":"Active"," Automation"),children:(0,R.jsx)(f.ZP,{danger:o,icon:(0,R.jsx)(P.Z,{})})}),(0,R.jsx)(h.Z,{title:"Download Voting Data",children:(0,R.jsx)(f.ZP,{disabled:!(null!==i&&void 0!==i&&i.length),icon:(0,R.jsx)(O,{}),onClick:function(){return(0,c.MD)(i)}})}),(0,R.jsx)(g.Z,{placement:"topLeft",title:"Are you sure?",description:"This action can't be undone.",onConfirm:function(){return n((0,a.tn)(t))},children:(0,R.jsx)(h.Z,{title:"Delete",children:(0,R.jsx)(f.ZP,{icon:(0,R.jsx)(T.Z,{})})})})]})}}],W=function(e){return M.filter((function(n){return n.guestType===e})).map((function(e){var n=e._id,t=e.guest,o=e.status,i=e.socials,r=e.recordingDate;return{votes:e.votes,guest:t,status:o,id:n,key:n,todo:"",isPublished:o===U,statusObj:{guest:null,host:null},recordingDate:new Date(r).getTime(),name:t?"".concat(t.firstName," ").concat(t.lastName):"--",isActive:o===U&&Y(i)}}))},K=function(){return 0===_?null:(0,R.jsxs)("div",{className:"flex-item br-5px gap-2",children:[(0,R.jsxs)(V,{strong:!0,className:"font-16px",type:"danger",children:[_," Automation",_>1?"s":""," Selected"]}),(0,R.jsx)(g.Z,{placement:"topLeft",title:"Are you sure?",okButtonProps:{danger:!0},description:"All the selected entries will be deleted.",onConfirm:function(){return n((0,a.H7)(l.map((function(e){return e.id}))))},children:(0,R.jsx)(f.ZP,{danger:!0,type:"primary",icon:(0,R.jsx)(T.Z,{})})})]})},J=c.Qg.map((function(e){var n=e.key;return{key:n,label:e.label,children:(0,R.jsx)(m.Z,{columns:Q,loading:z,dataSource:W(n),pagination:{defaultPageSize:5},rowSelection:{type:"checkbox",onChange:function(e,n){return d(n)}}})}}));return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(D.Z,{title:"Automations"}),(0,R.jsxs)("div",{className:"account-admin",children:[(0,R.jsx)(B,{className:"m-0 mb-1",children:"Automations"}),(0,R.jsxs)("div",{className:"flex-item",children:[(0,R.jsx)(B,{level:5,className:"m-0 mb-4 fw-400 color-45485C flex-auto",children:"Manage the automations of your guests & track the numbers of votes from your Guest (G), your connections (H), or Neither (N). You can also export voters\u2019 email addresses, topic suggestions, referral names, etc."}),(0,R.jsx)(f.ZP,{type:"info",shape:"round",size:"large",children:"REMIND INVITES"})]}),(0,R.jsx)(p.Z,{items:J,defaultActiveKey:null===(e=c.Qg[0])||void 0===e?void 0:e.key,tabBarExtraContent:{right:(0,R.jsx)(K,{})}})]}),(0,R.jsx)(L,{votes:Z,onClose:function(){return k(!1)}}),(0,R.jsx)(x.Z,{footer:null,open:!!G,width:"min(90%, 820px)",title:"Automation Congrats & Details",onCancel:function(){return C(null)},children:G&&(0,R.jsx)(q.Z,{guest:G})})]})}function L(e){var n=e.votes,t=void 0===n?[]:n,i=e.onClose,r=[{title:"#",dataIndex:"index"},{title:"Selected Topic",dataIndex:"topic"},m.Z.EXPAND_COLUMN,{title:"Suggestion",dataIndex:"suggestion"},{title:"Voter",dataIndex:"voter"},{title:"Timestamp",dataIndex:"createdAt"}],l=(t||[]).map((function(e,n){var t=e._id,i=e.createdAt,r=e.selectedTopic,l=e.suggestions,s=e.isSuggestion;return(0,o.Z)((0,o.Z)({},e),{},{key:t,index:n+1,createdAt:(0,c.fh)(i),topic:(0,R.jsx)(j.Z,{title:"Suggestions",open:!!s&&null,content:(0,R.jsxs)("div",{className:"topic-suggestion",children:[(0,R.jsxs)(F,{className:"m-0",children:["Topic: ",(0,R.jsx)(V,{strong:!0,children:null===l||void 0===l?void 0:l.topic})]}),(0,R.jsxs)(F,{className:"m-0",children:["Speaker: ",(0,R.jsx)(V,{strong:!0,children:(null===l||void 0===l?void 0:l.speaker)||"--"})]})]}),children:(0,R.jsx)(y.Z,{bordered:!s,children:(null===r||void 0===r?void 0:r.topic)||"OTHER"})}),suggestion:"hello"})}));return(0,R.jsx)(x.Z,{width:800,footer:null,open:!!t,onCancel:i,title:"Voting Details (".concat(null===t||void 0===t?void 0:t.length,")"),children:(0,R.jsx)(m.Z,{columns:r,dataSource:l,expandable:{expandedRowRender:function(e){return(0,R.jsx)("p",{style:{margin:0},children:e.description})},rowExpandable:function(e){var n;return(null===e||void 0===e||null===(n=e.questionnaireAnswers)||void 0===n?void 0:n.length)>0}}})})}},64590:function(e,n,t){t.d(n,{Z:function(){return y}});var o=t(93433),i=t(29439),r=t(72791),l=t(78302),s=t(2641),a=t(40959),c=t(57689),d=t(11087),u=t(33805),v=t(38072),h=t(908),f=t(48586),g=t(99372),m=t(67575),p=t(80184);function x(e){var n=e.text,t=void 0===n?"":n,o=e.className,i=void 0===o?"":o,r=e.onCopy,s=void 0===r?function(){}:r;return(0,p.jsx)("div",{className:"p-1 br-5px bg-sky-6 border-sky-1 ".concat(i),children:(0,p.jsx)(l.Z.Paragraph,{ellipsis:!0,copyable:{onCopy:s},className:"m-0 flex-item space-between",children:t})})}var j=l.Z.Title;function y(e){var n=e.guest,t=e.showActionBtns,l=void 0!==t&&t,y=e.onGoBack,Z=void 0===y?function(){}:y,k=(0,c.s0)(),w=(0,r.useState)(!1),b=(0,i.Z)(w,2),S=b[0],N=b[1],C=((null===n||void 0===n?void 0:n.socials)||[]).reduce((function(e,n){if(!n||!n.isConnected)return e;var t=n.type,i=n.subType;return[].concat((0,o.Z)(e),["".concat(h.WU[t]," ").concat(i)])}),[]);return(0,p.jsxs)("div",{className:"mt-2 bg-F7F3F9 p-3 br-5px",children:[(0,p.jsx)(j,{level:3,children:"\ud83d\udc4f Congrats, your new Upplaud is ready to pull in new interest!"}),(0,p.jsxs)(j,{level:5,children:["Voters will be directed to:"," ",(0,p.jsx)(d.rU,{target:"_blank",to:"/vote/".concat(null===n||void 0===n?void 0:n._id),children:"Voting Page"})]}),(0,p.jsx)(j,{level:5,children:"You've connected:"}),(0,p.jsx)("ul",{children:C.map((function(e,n){return(0,p.jsx)("li",{className:"capitalize",children:e},n)}))}),(0,p.jsxs)(j,{level:5,children:["Preview your voter invitation video:"," ",(0,p.jsx)(s.ZP,{className:"ml-1",icon:(0,p.jsx)(f.Z,{}),onClick:function(){return N(!0)},children:"Preview Video"})]}),(0,p.jsxs)(j,{level:5,className:"mb-1",children:["Your guest will be invited to connect here:"," ",(0,p.jsx)(d.rU,{target:"_blank",to:"/guest-acceptance/".concat(null===n||void 0===n?void 0:n._id),children:"Guest Invitation Page"})]}),(0,p.jsxs)(j,{level:5,className:"mt-0",children:["Their private invite password is:"," ",(0,p.jsx)(x,{text:null===n||void 0===n?void 0:n.password,className:"d-inline-block w-125px ml-1"})]}),(0,p.jsxs)(j,{level:4,children:["We'll start posting ","<when your guest connects their social media or> <later today!>"]}),l&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.ZP,{type:"default",size:"large",onClick:Z,icon:(0,p.jsx)(g.Z,{}),children:"Go back to make any changes."}),(0,p.jsx)(s.ZP,{type:"primary",size:"large",className:"d-block mt-2",icon:(0,p.jsx)(m.Z,{}),onClick:function(){return k(v.vB.dashboard.automations)},children:"CONFIRM YOUR NEW UPPLAUD & SEE YOUR OTHER AUTOMATIONS"})]}),(0,p.jsx)(a.Z,{centered:!0,width:"50%",footer:!1,open:S,title:"Preview Video Invitation Post",onCancel:function(){return N(!1)},children:(0,p.jsx)("video",{controls:!0,style:{width:"100%",height:"auto"},src:(0,u.fE)(null===n||void 0===n?void 0:n.socialShareFileSrc)})})]})}},18406:function(e,n,t){t.d(n,{K6:function(){return j},MD:function(){return y},Qg:function(){return m},Ug:function(){return p},dh:function(){return x},fh:function(){return g},mr:function(){return f}});var o=t(29439),i=t(93433),r=t(25415),l=t(908),s=l.lr.FACEBOOK,a=l.Jh.HOST_GUEST,c=l.Jh.SOLO_SESSION,d=l.np.PROFILE,u=l.np.PAGE,v=l.np.GROUP,h=["##E91E63","#673AB7","#2196F3","#00BCD4","#FF9800","#8BC34A","#009688","#FF5722","#607D8B","#F44336"],f=function(){return h[Math.floor(Math.random()*h.length)]},g=function(e){return new Date(e).toDateString()},m=[{key:a,value:a,label:"JOINT SESSION",text:"Their Info"},{key:c,value:c,label:"SOLO SESSION",text:"Your Info"}],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;return m.find((function(n){return n.key===e}))},x=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=function(e){return l.WU[e]}(e);return n===d?"YOUR ".concat(o," PROFILE"):n===u?"YOUR ".concat(o," PAGE: ").concat(t):n===v?"YOUR ".concat(o," GROUP: ").concat(t):""},j=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,n){if(null===n||void 0===n||!n.isConnected)return e;var t=n.type,o=n.socialId,r=n.page,l=n.group,a=function(e,n){return{type:t,subType:e,frequency:arguments.length>3&&void 0!==arguments[3]?arguments[3]:4,subTypeId:n,subTypeName:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",isActive:!1,_id:"".concat(t,"_").concat(e),isConnected:(n||"").toString().length>0}},c=function(e){var n;return(null===e||void 0===e||null===(n=e.accounts.find((function(n){return n.id===(null===e||void 0===e?void 0:e.socialId)})))||void 0===n?void 0:n.name)||""},h=[].concat((0,i.Z)(e),[a(d,o),a(u,null===r||void 0===r?void 0:r.socialId,c(r))]);return t===s?[].concat((0,i.Z)(h),[a(v,null===l||void 0===l?void 0:l.socialId,c(r))]):h}),[])},y=function(e){var n=new r.Workbook,t=n.addWorksheet("Voting Data"),i=(e[0]||{}).questionnaireAnswers,l=void 0===i?[]:i,s=(0,o.Z)(l,4),a=s[0],c=s[1],d=s[2],u=s[3];t.columns=[{header:"Selected Topic",key:"topic"},{header:"Voter Name",key:"voter_name"},{header:"Voter Email",key:"voter_email"},{header:"Voter Cell Phone",key:"voter_cellphone"},{header:"User Suggested",key:"isSuggestion"},{header:"Suggested Topic",key:"suggested_topic"},{header:"Suggested Speaker",key:"suggested_speaker"},{header:"Question 1: ".concat(null===a||void 0===a?void 0:a.question),key:"quest1"},{header:"Question 2: ".concat(null===c||void 0===c?void 0:c.question),key:"quest2"},{header:"Referral 1",key:"quest2_referral1"},{header:"Referral 2",key:"quest2_referral2"},{header:"Name",key:"quest2_name"},{header:"Email",key:"quest2_email"},{header:"Question 3: ".concat(null===d||void 0===d?void 0:d.question),key:"quest3"},{header:"Question 4: ".concat(null===u||void 0===u?void 0:u.question),key:"quest4"},{header:"Timestamp",key:"timestamp"}],e.forEach((function(e){var n,i,r,l,s,a,c=e.selectedTopic,d=e.voter,u=e.isSuggestion,v=e.suggestions,h=e.createdAt,f=e.questionnaireAnswers,g=(0,o.Z)(f,4),m=g[0],p=g[1],x=g[2],j=g[3];t.addRow({topic:(null===c||void 0===c?void 0:c.topic)||"Other",voter_name:(null===d||void 0===d?void 0:d.name)||"--",voter_email:(null===d||void 0===d?void 0:d.email)||"--",voter_cellphone:(null===d||void 0===d?void 0:d.cell_phone)||"--",isSuggestion:u?"Yes":"No",suggested_topic:(null===v||void 0===v?void 0:v.topic)||"--",suggested_speaker:(null===v||void 0===v?void 0:v.speaker)||"--",quest1:m&&(null===m||void 0===m?void 0:m.answers)||"--",quest2:null!==p&&void 0!==p&&p.answers?"Comment: ".concat((null===p||void 0===p||null===(n=p.answers)||void 0===n?void 0:n.comment)||"--"):"--",quest2_referral1:(null===p||void 0===p||null===(i=p.answers)||void 0===i?void 0:i.referral1)||"--",quest2_referral2:(null===p||void 0===p||null===(r=p.answers)||void 0===r?void 0:r.referral2)||"--",quest2_name:(null===p||void 0===p||null===(l=p.answers)||void 0===l?void 0:l.name)||"--",quest2_email:(null===p||void 0===p||null===(s=p.answers)||void 0===s?void 0:s.email)||"--",quest3:x&&(null===x||void 0===x||null===(a=x.answers)||void 0===a?void 0:a.answer)||"--",quest4:j?null!==j&&void 0!==j&&j.doneSharing?"Yes":"No":"--",timestamp:new Date(h).toLocaleString()})})),n.xlsx.writeBuffer().then((function(e){var n=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=window.URL.createObjectURL(n),o=document.createElement("a");o.href=t,o.download="VotingData.xlsx",o.click()}))}}}]);
//# sourceMappingURL=527.ca7a7c62.chunk.js.map